<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Gemini</title>
    <link rel="icon" type="image/x-icon" th:src="@{images/Logo.ico}">
     <link rel="stylesheet" th:href="@{assets/css/Dashboard.css}">
<!--    <link rel="stylesheet" href="..\resources\assets\css\Dashboard.css">-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
</head>
<body>
<!-- Container for greeting message and menu -->
<div class="container">
    <!-- Greeting message -->
    <div class="greeting-message">
        <h1>Hello, <span th:text="${username}"></span>! üåöüåù</h1>
    </div>
    <!-- Menu -->
    <div class="menu">
        <div class="logo-container">
            <img th:src="@{images/Logo_circle.png}" alt="Logo" class="logo">
            <span class="menu-text">Gemini</span>
            <span class="menu-version">V0.1</span>
        </div>
        <ul>
            <li><a th:href="@{/dashboard}"><img th:src="@{images/3d-square%201.png}" alt="Logo" class="logo-menu">Dashboard</a></li>
            <li><a th:href="@{/CreateSciPlan}"><img th:src="@{images/3d-square%201.png}" alt="Logo" class="logo-menu">Create Plan</a></li>
            <li><a th:href="@{/submission}"><img th:src="@{images/user-square%201.png}" alt="Logo" class="logo-menu">Submission</a></li>
            <li><a th:href="@{/testing}"><img th:src="@{images/wallet-money%202.png}" alt="Logo" class="logo-menu">Testing</a></li>
        </ul>
        <div class="profile">
            <a th:href="@{/login}" class="logout-link">
                <img th:src="@{/images/user.png}" alt="Logo" class="logo-menu">
                <span>Log out</span>
            </a>
        </div>
    </div>
</div>

<!-- Container for dashboard content and plan list -->
<div class="container">
    <!-- dashboard -->
    <div class="dashboard-content">
        <div class="Plan-detail">
            <div class="svg-container">
                <img th:src="@{images/profile-2user.svg}" alt="profile-2user">
            </div>
            <div class="Plan-Content">
                <h2>Total Plan</h2>
                <p th:text="${totalPlans}"></p>
            </div>
        </div>
        <div class="Plan-detail">
            <div class="svg-container">
                <img th:src="@{images/profile-2user.svg}" alt="profile-2user">
            </div>
            <div class="Plan-Content">
                <h2>Saved Plan</h2>
                <p th:text="${draftPlan}"></p>
            </div>
        </div>
        <div class="Plan-detail">
            <div class="svg-container">
                <img th:src="@{images/profile-2user.svg}" alt="profile-2user">
            </div>
            <div class="Plan-Content">
                <h2>Submitted Plan</h2>
                <p th:text="${submittedPlan}"></p>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <!-- Plan list -->
    <div class="plan-list">
        <div class="plan-list-header">
            <div class="description-plan">
                <h2>Plan Waiting for Submission</h2>
                <span>List of Plan</span>
            </div>
        </div>
        <table>
            <thead>
            <tr>
                                <th>Plan ID</th>
                                <th>Star System</th>
                                <th>Creator</th>
                                <th>Submitter</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Location</th>
                                <th>Status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="plan, rowStat : ${plans}" class="plan-detail">
                <td th:text="${plan.planNo}"></td>
                <td th:text="${plan.starSystem}"></td>
                <td th:text="${plan.creator.getName()}"></td>
                <td th:text="${plan.submitter.getName()}"></td>
                <td th:text="${plan.startDate}"></td>
                <td th:text="${plan.endDate}"></td>
                <td th:text="${plan.telescopeLocation}"></td>
                <td th:text="${plan.status}"></td>
            </tr>>
            </tbody>
        </table>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var rows = document.querySelectorAll(".plan-detail");
        rows.forEach(function(row) {
            row.addEventListener("click", function() {
                // Get the next row (details row)
                var detailsRow = this.nextElementSibling;

                // Toggle visibility of the details row
                if (detailsRow && detailsRow.classList.contains("details")) {
                    // If details row exists, toggle its display property
                    if (detailsRow.style.display === "none") {
                        detailsRow.style.display = "table-row"; // Show the details
                    } else {
                        detailsRow.style.display = "none"; // Hide the details
                    }
                } else {
                    // If details row doesn't exist, create and insert it
                    var newDetailsRow = document.createElement("tr");
                    newDetailsRow.classList.add("details");
                    var detailsCell = document.createElement("td");
                    detailsCell.setAttribute("colspan", "8");
                    var detailsContent = document.createElement("div");
                    detailsContent.innerHTML = "<h2>Data Process Requirement</h2><p>Detail 2:</p><p>Detail 3: ...</p>";
                    detailsCell.appendChild(detailsContent);
                    newDetailsRow.appendChild(detailsCell);
                    this.parentNode.insertBefore(newDetailsRow, this.nextSibling);
                }
            });
        });
    });
</script>



</body>
</html>
